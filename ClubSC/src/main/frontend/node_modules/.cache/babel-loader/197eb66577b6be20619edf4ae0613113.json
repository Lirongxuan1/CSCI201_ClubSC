{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import axios from'axios';import SearchResult from'../components/SearchResult';import ResultContainer from'../components/ResultContainer';import ContainerView from'../components/ContainerView';var ResultsPage=function ResultsPage(_ref){var term=_ref.term,onTermChange=_ref.onTermChange,onClubSelect=_ref.onClubSelect,user=_ref.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];useEffect(function(){if(user&&user.roles.includes('ROLE_CLUB')){window.history.pushState({},'','/');var navEvent=new PopStateEvent('popstate');window.dispatchEvent(navEvent);}});useEffect(function(){var isCancelled=false;var search=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://localhost:8080/app/clubsearch\",{key:term});case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(!isCancelled){setResults(data);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function search(){return _ref2.apply(this,arguments);};}();search();return function(){isCancelled=true;};},[term]);var renderedResults=results.map(function(result){return/*#__PURE__*/_jsx(SearchResult,{onClubSelect:onClubSelect,id:result.club_id,name:result.username,description:result.desc},result.club_id);});return/*#__PURE__*/_jsx(ContainerView,{search:true,onTermChange:onTermChange,user:user,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"my-3\",style:{textAlign:'center'},children:\"\".concat(results.length,\" results found\")}),/*#__PURE__*/_jsx(ResultContainer,{children:renderedResults})]})});};ResultsPage.defaultProps={term:window.location.search.slice(1,window.location.search.length)};export default ResultsPage;","map":{"version":3,"sources":["/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/src/pages/ResultsPage.js"],"names":["React","useState","useEffect","axios","SearchResult","ResultContainer","ContainerView","ResultsPage","term","onTermChange","onClubSelect","user","results","setResults","roles","includes","window","history","pushState","navEvent","PopStateEvent","dispatchEvent","isCancelled","search","post","key","data","renderedResults","map","result","club_id","username","desc","textAlign","length","defaultProps","location","slice"],"mappings":"ylBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAgD,IAA7CC,CAAAA,IAA6C,MAA7CA,IAA6C,CAAvCC,YAAuC,MAAvCA,YAAuC,CAAzBC,YAAyB,MAAzBA,YAAyB,CAAXC,IAAW,MAAXA,IAAW,eACpCV,QAAQ,CAAC,EAAD,CAD4B,wCAC3DW,OAD2D,eAClDC,UADkD,eAGlEX,SAAS,CAAC,UAAM,CACd,GAAGS,IAAI,EAAIA,IAAI,CAACG,KAAL,CAAWC,QAAX,CAAoB,WAApB,CAAX,CAA4C,CAC1CC,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyB,EAAzB,CAA6B,EAA7B,CAAiC,GAAjC,EACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,aAAJ,CAAkB,UAAlB,CAAjB,CACAJ,MAAM,CAACK,aAAP,CAAqBF,QAArB,EACD,CACF,CANQ,CAAT,CAQAjB,SAAS,CAAC,UAAM,CACd,GAAIoB,CAAAA,WAAW,CAAG,KAAlB,CAEA,GAAMC,CAAAA,MAAM,2FAAG,oLACUpB,CAAAA,KAAK,CAACqB,IAAN,CAAW,sCAAX,CACrB,CACEC,GAAG,CAAEjB,IADP,CADqB,CADV,wCACLkB,IADK,mBACLA,IADK,CAOb,GAAG,CAACJ,WAAJ,CAAgB,CACdT,UAAU,CAACa,IAAD,CAAV,CACD,CATY,sDAAH,kBAANH,CAAAA,MAAM,2CAAZ,CAYAA,MAAM,GAEN,MAAO,WAAM,CACXD,WAAW,CAAG,IAAd,CACD,CAFD,CAGD,CApBQ,CAoBN,CAACd,IAAD,CApBM,CAAT,CAsBA,GAAMmB,CAAAA,eAAe,CAAGf,OAAO,CAACgB,GAAR,CAAY,SAACC,MAAD,CAAY,CAC9C,mBACE,KAAC,YAAD,EACE,YAAY,CAAEnB,YADhB,CAGE,EAAE,CAAEmB,MAAM,CAACC,OAHb,CAIE,IAAI,CAAED,MAAM,CAACE,QAJf,CAKE,WAAW,CAAEF,MAAM,CAACG,IALtB,EAEOH,MAAM,CAACC,OAFd,CADF,CASD,CAVuB,CAAxB,CAYA,mBACE,KAAC,aAAD,EAAe,MAAM,CAAE,IAAvB,CAA6B,YAAY,CAAErB,YAA3C,CAAyD,IAAI,CAAEE,IAA/D,uBACE,aAAK,SAAS,CAAC,WAAf,wBACA,UAAG,SAAS,CAAC,MAAb,CAAoB,KAAK,CAAE,CAACsB,SAAS,CAAC,QAAX,CAA3B,oBAAqDrB,OAAO,CAACsB,MAA7D,oBADA,cAEA,KAAC,eAAD,WACGP,eADH,EAFA,GADF,EADF,CAUD,CAvDD,CAyDApB,WAAW,CAAC4B,YAAZ,CAA2B,CACzB3B,IAAI,CAAEQ,MAAM,CAACoB,QAAP,CAAgBb,MAAhB,CAAuBc,KAAvB,CAA6B,CAA7B,CAAgCrB,MAAM,CAACoB,QAAP,CAAgBb,MAAhB,CAAuBW,MAAvD,CADmB,CAA3B,CAIA,cAAe3B,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport SearchResult from '../components/SearchResult';\nimport ResultContainer from '../components/ResultContainer';\nimport ContainerView from '../components/ContainerView';\n\nconst ResultsPage = ({ term, onTermChange, onClubSelect, user }) => {\n  const [results, setResults] = useState([]);\n\n  useEffect(() => {\n    if(user && user.roles.includes('ROLE_CLUB')){\n      window.history.pushState({}, '', '/');\n      const navEvent = new PopStateEvent('popstate');\n      window.dispatchEvent(navEvent);\n    }\n  });\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    const search = async () => {\n      const { data } = await axios.post(\"http://localhost:8080/app/clubsearch\",\n        {\n          key: term\n        }\n      )\n\n      if(!isCancelled){\n        setResults(data);\n      }\n    }\n\n    search();\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [term]);\n\n  const renderedResults = results.map((result) => {\n    return (\n      <SearchResult\n        onClubSelect={onClubSelect}\n        key={result.club_id}\n        id={result.club_id}\n        name={result.username}\n        description={result.desc}\n      />\n    );\n  });\n\n  return (\n    <ContainerView search={true} onTermChange={onTermChange} user={user}>\n      <div className=\"container\">\n      <p className=\"my-3\" style={{textAlign:'center'}}>{`${results.length} results found`}</p>\n      <ResultContainer>\n        {renderedResults}\n      </ResultContainer>\n      </div>\n    </ContainerView>\n  );\n};\n\nResultsPage.defaultProps = {\n  term: window.location.search.slice(1, window.location.search.length)\n}\n\nexport default ResultsPage;\n"]},"metadata":{},"sourceType":"module"}