{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import axios from'axios';import ContainerView from'../components/ContainerView';import ResultContainer from'../components/ResultContainer';import FollowedClub from'../components/FollowedClub';import{authHeader}from'../App';var UserPage=function UserPage(_ref){var onTermChange=_ref.onTermChange,user=_ref.user,setUser=_ref.setUser,onClubSelect=_ref.onClubSelect;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];useEffect(function(){if(!user||user.roles.includes('ROLE_CLUB')){window.history.pushState({},'','/');var navEvent=new PopStateEvent('popstate');window.dispatchEvent(navEvent);}});useEffect(function(){var search=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:8080/app/clubsfollowed\",{headers:authHeader()});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setFollowed(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function search(){return _ref2.apply(this,arguments);};}();search();});var name=user.username;var logout=function logout(event){localStorage.removeItem('user');setUser(JSON.parse(localStorage.getItem('user')));event.preventDefault();window.history.pushState({},'','/');var navEvent=new PopStateEvent('popstate');window.dispatchEvent(navEvent);};var renderedClubs=followed.map(function(club){return/*#__PURE__*/_jsx(FollowedClub,{onClubSelect:onClubSelect,name:club.username,id:club.club_id},club.club_id);});return/*#__PURE__*/_jsx(ContainerView,{search:true,user:user,onTermChange:onTermChange,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:name}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:logout,children:\"Log Out\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(ResultContainer,{children:renderedClubs})]})});};export default UserPage;","map":{"version":3,"sources":["/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/src/pages/UserPage.js"],"names":["React","useState","useEffect","axios","ContainerView","ResultContainer","FollowedClub","authHeader","UserPage","onTermChange","user","setUser","onClubSelect","followed","setFollowed","roles","includes","window","history","pushState","navEvent","PopStateEvent","dispatchEvent","search","get","headers","data","name","username","logout","event","localStorage","removeItem","JSON","parse","getItem","preventDefault","renderedClubs","map","club","club_id"],"mappings":"ylBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,OAASC,UAAT,KAA2B,QAA3B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAmD,IAAhDC,CAAAA,YAAgD,MAAhDA,YAAgD,CAAlCC,IAAkC,MAAlCA,IAAkC,CAA5BC,OAA4B,MAA5BA,OAA4B,CAAnBC,YAAmB,MAAnBA,YAAmB,eAClCX,QAAQ,CAAC,EAAD,CAD0B,wCAC3DY,QAD2D,eACjDC,WADiD,eAGlEZ,SAAS,CAAC,UAAM,CACd,GAAG,CAACQ,IAAD,EAASA,IAAI,CAACK,KAAL,CAAWC,QAAX,CAAoB,WAApB,CAAZ,CAA6C,CAC3CC,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyB,EAAzB,CAA6B,EAA7B,CAAiC,GAAjC,EACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,aAAJ,CAAkB,UAAlB,CAAjB,CACAJ,MAAM,CAACK,aAAP,CAAqBF,QAArB,EACD,CACF,CANQ,CAAT,CAQAlB,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,MAAM,2FAAG,mLACUpB,CAAAA,KAAK,CAACqB,GAAN,CAAU,yCAAV,CACrB,CAAEC,OAAO,CAAElB,UAAU,EAArB,CADqB,CADV,uCACLmB,IADK,kBACLA,IADK,CAIbZ,WAAW,CAACY,IAAD,CAAX,CAJa,sDAAH,kBAANH,CAAAA,MAAM,2CAAZ,CAOAA,MAAM,GACP,CATQ,CAAT,CAWA,GAAMI,CAAAA,IAAI,CAAGjB,IAAI,CAACkB,QAAlB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,CACxBC,YAAY,CAACC,UAAb,CAAwB,MAAxB,EACArB,OAAO,CAACsB,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAX,CAAD,CAAP,CAEAL,KAAK,CAACM,cAAN,GACAnB,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyB,EAAzB,CAA6B,EAA7B,CAAiC,GAAjC,EAEA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,aAAJ,CAAkB,UAAlB,CAAjB,CACAJ,MAAM,CAACK,aAAP,CAAqBF,QAArB,EACD,CATD,CAWA,GAAMiB,CAAAA,aAAa,CAAGxB,QAAQ,CAACyB,GAAT,CAAa,SAACC,IAAD,CAAU,CAC3C,mBACE,KAAC,YAAD,EACE,YAAY,CAAE3B,YADhB,CAEE,IAAI,CAAE2B,IAAI,CAACX,QAFb,CAIE,EAAE,CAAEW,IAAI,CAACC,OAJX,EAGOD,IAAI,CAACC,OAHZ,CADF,CAQD,CATqB,CAAtB,CAWA,mBACE,KAAC,aAAD,EAAe,MAAM,CAAE,IAAvB,CAA6B,IAAI,CAAE9B,IAAnC,CAAyC,YAAY,CAAED,YAAvD,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,aAAK,SAAS,CAAC,4DAAf,wBACE,WAAI,SAAS,CAAC,MAAd,UAAsBkB,IAAtB,EADF,cAEE,eAAQ,SAAS,CAAC,mBAAlB,CAAsC,OAAO,CAAEE,MAA/C,qBAFF,GADF,cAKE,aALF,cAME,KAAC,eAAD,WACGQ,aADH,EANF,GADF,EADF,CAcD,CA5DD,CA8DA,cAAe7B,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ContainerView from '../components/ContainerView';\nimport ResultContainer from '../components/ResultContainer';\nimport FollowedClub from '../components/FollowedClub';\nimport { authHeader } from '../App';\n\nconst UserPage = ({ onTermChange, user, setUser, onClubSelect }) => {\n  const [followed, setFollowed] = useState([]);\n\n  useEffect(() => {\n    if(!user || user.roles.includes('ROLE_CLUB')){\n      window.history.pushState({}, '', '/');\n      const navEvent = new PopStateEvent('popstate');\n      window.dispatchEvent(navEvent);\n    }\n  });\n\n  useEffect(() => {\n    const search = async () => {\n      const { data } = await axios.get(\"http://localhost:8080/app/clubsfollowed\",\n        { headers: authHeader() });\n\n      setFollowed(data);\n    }\n\n    search();\n  });\n\n  const name = user.username;\n\n  const logout = (event) => {\n    localStorage.removeItem('user');\n    setUser(JSON.parse(localStorage.getItem('user')));\n\n    event.preventDefault();\n    window.history.pushState({}, '', '/');\n\n    const navEvent = new PopStateEvent('popstate');\n    window.dispatchEvent(navEvent);\n  }\n\n  const renderedClubs = followed.map((club) => {\n    return (\n      <FollowedClub\n        onClubSelect={onClubSelect}\n        name={club.username}\n        key={club.club_id}\n        id={club.club_id}\n      />\n    );\n  });\n\n  return (\n    <ContainerView search={true} user={user} onTermChange={onTermChange}>\n      <div className=\"container\">\n        <div className=\"d-flex flex-row justify-content-between align-items-center\">\n          <h1 className=\"mt-4\">{name}</h1>\n          <button className=\"btn btn-secondary\" onClick={logout}>Log Out</button>\n        </div>\n        <hr />\n        <ResultContainer>\n          {renderedClubs}\n        </ResultContainer>\n      </div>\n    </ContainerView>\n  );\n};\n\nexport default UserPage;\n"]},"metadata":{},"sourceType":"module"}