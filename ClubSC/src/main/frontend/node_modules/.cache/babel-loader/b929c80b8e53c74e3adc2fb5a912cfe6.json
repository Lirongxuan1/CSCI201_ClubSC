{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import Faker from'faker';import Post from'../components/Post';import axios from'axios';import ContainerView from'../components/ContainerView';import{authHeader}from'../App';var ClubPage=function ClubPage(_ref){var id=_ref.id,onTermChange=_ref.onTermChange,user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),followed=_useState2[0],setFollowed=_useState2[1];useEffect(function(){if(user&&user.roles.includes('ROLE_CLUB')){window.history.pushState({},'','/');var navEvent=new PopStateEvent('popstate');window.dispatchEvent(navEvent);}});useEffect(function(){var alreadyFollowed=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:8080/app/clubsfollowed\",{headers:authHeader()});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;i=0;case 5:if(!(i<data.length)){_context.next=12;break;}if(!(data[i].club_id===id)){_context.next=9;break;}setFollowed(true);return _context.abrupt(\"break\",12);case 9:i++;_context.next=5;break;case 12:case\"end\":return _context.stop();}}},_callee);}));return function alreadyFollowed(){return _ref2.apply(this,arguments);};}();alreadyFollowed();},[id]);var _useState3=useState({club_id:null,club_name:'',club_desc:'',announcements:[]}),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];useEffect(function(){var getClubInfo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"http://localhost:8080/app/clubpage\",{key:id});case 2:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setInfo(data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getClubInfo(){return _ref3.apply(this,arguments);};}();getClubInfo();},[id]);var follow=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.next=3;return axios.post(\"http://localhost:8080/app/studentfollow\",{club:id},{headers:authHeader()});case 3:setFollowed(true);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function follow(_x){return _ref4.apply(this,arguments);};}();var renderedAnnouncements=info.announcements.map(function(a){return/*#__PURE__*/_jsx(Post,{timestamp:a.timestamp,red:true,children:/*#__PURE__*/_jsx(\"p\",{children:a.body})},a.postid);});return/*#__PURE__*/_jsx(ContainerView,{search:true,user:user,onTermChange:onTermChange,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-center align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:info.club_name}),user?/*#__PURE__*/_jsx(\"button\",{onClick:follow,className:\"btn btn-primary ml-3 mt-3\",disabled:followed,children:followed?/*#__PURE__*/_jsx(\"svg\",{width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",className:\"bi bi-person-check-fill\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm9.854-2.854a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z\"})}):/*#__PURE__*/_jsx(\"svg\",{width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",className:\"bi bi-person-plus\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10zM13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z\"})})}):null]}),/*#__PURE__*/_jsx(\"p\",{children:info.club_desc})]}),/*#__PURE__*/_jsx(\"hr\",{}),renderedAnnouncements]})});};ClubPage.defaultProps={id:window.location.search.slice(1,window.location.search.length)};export default ClubPage;","map":{"version":3,"sources":["/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/src/pages/ClubPage.js"],"names":["React","useState","useEffect","Faker","Post","axios","ContainerView","authHeader","ClubPage","id","onTermChange","user","followed","setFollowed","roles","includes","window","history","pushState","navEvent","PopStateEvent","dispatchEvent","alreadyFollowed","get","headers","data","i","length","club_id","club_name","club_desc","announcements","info","setInfo","getClubInfo","post","key","follow","e","preventDefault","club","renderedAnnouncements","map","a","timestamp","body","postid","defaultProps","location","search","slice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Faker from 'faker';\nimport Post from '../components/Post';\nimport axios from 'axios';\nimport ContainerView from '../components/ContainerView';\nimport { authHeader } from '../App';\n\nconst ClubPage = ({  id, onTermChange, user }) => {\n  const [followed, setFollowed] = useState(false);\n\n  useEffect(() => {\n    if(user && user.roles.includes('ROLE_CLUB')){\n      window.history.pushState({}, '', '/');\n      const navEvent = new PopStateEvent('popstate');\n      window.dispatchEvent(navEvent);\n    }\n  });\n\n  useEffect(() => {\n    const alreadyFollowed = async () => {\n      const { data } = await axios.get(\"http://localhost:8080/app/clubsfollowed\",\n        { headers: authHeader() });\n\n      for(let i = 0; i < data.length; i++){\n        if(data[i].club_id === id){\n          setFollowed(true);\n          break;\n        }\n      }\n    }\n\n    alreadyFollowed();\n  }, [id]);\n\n  const [info, setInfo] = useState({\n    club_id: null,\n    club_name: '',\n    club_desc: '',\n    announcements: []\n  });\n\n  useEffect(() => {\n    const getClubInfo = async () => {\n      const { data } = await axios.post(\"http://localhost:8080/app/clubpage\",\n        {\n          key: id\n        }\n      );\n\n      setInfo(data);\n    }\n\n    getClubInfo();\n  }, [id]);\n\n  const follow = async (e) => {\n    e.preventDefault();\n    await axios.post(\"http://localhost:8080/app/studentfollow\",\n      {\n        club: id\n      },\n    { headers: authHeader() });\n\n    setFollowed(true);\n  }\n\n  const renderedAnnouncements = info.announcements.map((a) => {\n    return (\n      <Post key={a.postid} timestamp={a.timestamp} red={true}>\n        <p>{a.body}</p>\n      </Post>\n    );\n  });\n\n  return (\n    <ContainerView search={true} user={user} onTermChange={onTermChange}>\n      <div className=\"container\">\n        <div className=\"d-flex flex-column justify-content-center align-items-center\">\n          <div className =\"d-flex flex-row justify-content-center align-items-center\">\n            <h1 className=\"mt-4\">{info.club_name}</h1>\n            {user ?\n            <button onClick={follow} className=\"btn btn-primary ml-3 mt-3\" disabled={followed}>\n              {followed ?\n              <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-person-check-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm9.854-2.854a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z\"/>\n              </svg>  :\n              <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-person-plus\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M8 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10zM13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z\"/>\n              </svg>}\n            </button> :\n            null}\n          </div>\n          <p>{info.club_desc}</p>\n        </div>\n        <hr />\n        {renderedAnnouncements}\n      </div>\n    </ContainerView>\n  );\n};\n\nClubPage.defaultProps = {\n  id: window.location.search.slice(1, window.location.search.length)\n}\n\nexport default ClubPage;\n"]},"metadata":{},"sourceType":"module"}