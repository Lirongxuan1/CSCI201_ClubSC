{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import axios from'axios';import ContainerView from'../components/ContainerView';import InputField from'../components/InputField';import InputArea from'../components/InputArea';import Link from'../components/Link';var validateEmail=function validateEmail(email){return /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email);};var UserFields=function UserFields(_ref){var username=_ref.username,email=_ref.email,password=_ref.password,setUsername=_ref.setUsername,setEmail=_ref.setEmail,setPassword=_ref.setPassword;var errClasses=\"text-danger my-0 py-0\";return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputField,{className:\"pb-0 mb-0\",type:\"text\",title:\"Name\",onChange:setUsername}),username?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Please enter a username.\"}),username.length>20?/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Your username is too long\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputField,{className:\"pb-0 mb-0\",type:\"email\",title:\"Email\",onChange:setEmail}),email&&validateEmail(email)?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Please enter a valid email.\"}),email.length>50?/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Your email is too long\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputField,{className:\"pb-0 mb-0\",type:\"password\",title:\"Password\",onChange:setPassword}),password.length>=6&&password.length<=120?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Password must be 6 to 120 characters.\"}),/\\d/.test(password)?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Password must contain a number.\"})]})]});};var ClubFields=function ClubFields(_ref2){var username=_ref2.username,email=_ref2.email,password=_ref2.password,description=_ref2.description,setUsername=_ref2.setUsername,setEmail=_ref2.setEmail,setPassword=_ref2.setPassword,setDescription=_ref2.setDescription;var errClasses=\"text-danger my-0 py-0\";return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputField,{className:\"pb-0 mb-0\",type:\"text\",title:\"Club Name\",onChange:setUsername}),username?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Please enter a club name.\"}),username.length>20?/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Your club name is too long\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputField,{className:\"pb-0 mb-0\",type:\"email\",title:\"Email\",onChange:setEmail}),email&&validateEmail(email)?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Please enter a valid email.\"}),email.length>50?/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Your email is too long\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputField,{className:\"pb-0 mb-0\",type:\"password\",title:\"Password\",onChange:setPassword}),password.length>=6&&password.length<=120?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Password must be 6 to 120 characters.\"}),/\\d/.test(password)?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Password must contain a number.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputArea,{className:\"pb-0 mb-0\",placeholder:\"Club Description\",onChange:setDescription}),description?null:/*#__PURE__*/_jsx(\"p\",{className:errClasses,children:\"Please enter a description.\"})]})]});};var SignupPage=function SignupPage(_ref3){var setUser=_ref3.setUser,user=_ref3.user;var _useState=useState(\"student\"),_useState2=_slicedToArray(_useState,2),role=_useState2[0],setRole=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),description=_useState10[0],setDescription=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),errmsg=_useState12[0],setErrMsg=_useState12[1];useEffect(function(){if(user){window.history.pushState({},'','/');var navEvent=new PopStateEvent('popstate');window.dispatchEvent(navEvent);}});var handleSignup=function handleSignup(e){var signup=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user,email,pw,desc,r){var _yield$axios$post,message,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('http://localhost:8080/api/auth/signup',{username:user,email:email,password:pw,description:desc,role:[r]});case 3:_yield$axios$post=_context.sent;message=_yield$axios$post.message;_context.next=7;return axios.post('http://localhost:8080/api/auth/signin',{username:user,password:pw});case 7:_yield$axios$post2=_context.sent;data=_yield$axios$post2.data;localStorage.setItem(\"user\",JSON.stringify(data));setUser(JSON.parse(localStorage.getItem('user')));return _context.abrupt(\"return\",true);case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);setErrMsg(_context.t0.message);return _context.abrupt(\"return\",false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function signup(_x,_x2,_x3,_x4,_x5){return _ref4.apply(this,arguments);};}();e.preventDefault();if(!username||username.length>20){setErrMsg(\"Please check your username\");}else if(!email||!validateEmail(email)||email.length>50){setErrMsg(\"Please check your email\");}else if(password.length<6||password.length>120||!/\\d/.test(password)){setErrMsg(\"Please check your password\");}else if(role===\"club\"&&!description){setErrMsg(\"Please check your description\");}else{if(signup(username,email,password,description,role)){if(role===\"student\"){window.history.pushState({},'',\"/userdash\");}else{window.history.pushState({},'',\"/clubdash\");}var navEvent=new PopStateEvent('popstate');window.dispatchEvent(navEvent);}}};return/*#__PURE__*/_jsx(ContainerView,{logoOnly:true,user:undefined,children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex flex-row justify-content-center align-items-center\",style:{height:'60vh'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-10 col-md-8 col-lg-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-3\",style:{textAlign:'center'},children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"hr\",{}),errmsg?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",style:{textAlign:'center'},children:errmsg}):null,/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Account Type:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"mr-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"user-type\",value:\"student\",className:\"mr-1\",checked:role===\"student\",onChange:function onChange(e){return setRole(e.target.value);}}),\"Student\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"user-type\",value:\"club\",className:\"mr-1\",checked:role===\"club\",onChange:function onChange(e){return setRole(e.target.value);}}),\"Club\"]})]})]}),role===\"student\"?/*#__PURE__*/_jsx(UserFields,{username:username,email:email,password:password,setUsername:setUsername,setEmail:setEmail,setPassword:setPassword}):/*#__PURE__*/_jsx(ClubFields,{username:username,email:email,password:password,description:description,setUsername:setUsername,setPassword:setPassword,setEmail:setEmail,setDescription:setDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(Link,{className:\"mr-auto ml-1\",href:\"/login\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hide-mobile\",children:\"Already have an account?\"}),/*#__PURE__*/_jsx(\"span\",{className:\"show-mobile\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary ml-auto mr-1\",type:\"Submit\",children:\"Submit\"})]})]})]})})})});};export default SignupPage;","map":{"version":3,"sources":["/Users/cdrlao/Desktop/ClubSC/ClubSC/src/main/frontend/src/pages/SignupPage.js"],"names":["React","useState","useEffect","axios","ContainerView","InputField","InputArea","Link","validateEmail","email","test","UserFields","username","password","setUsername","setEmail","setPassword","errClasses","textAlign","length","ClubFields","description","setDescription","SignupPage","setUser","user","role","setRole","errmsg","setErrMsg","window","history","pushState","navEvent","PopStateEvent","dispatchEvent","handleSignup","e","signup","pw","desc","r","post","message","data","localStorage","setItem","JSON","stringify","parse","getItem","preventDefault","undefined","height","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ContainerView from '../components/ContainerView';\nimport InputField from '../components/InputField';\nimport InputArea from '../components/InputArea';\nimport Link from '../components/Link';\n\nconst validateEmail = (email) => {\n  return (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email));\n}\n\nconst UserFields = ({ username, email, password, setUsername, setEmail, setPassword }) => {\n  const errClasses = \"text-danger my-0 py-0\"\n\n  return (\n    <React.Fragment>\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputField\n          className=\"pb-0 mb-0\"\n          type=\"text\"\n          title=\"Name\"\n          onChange={setUsername}\n        />\n        {username ? null : <p className={errClasses}>Please enter a username.</p>}\n        {username.length>20 ? <p className={errClasses}>Your username is too long</p> : null}\n      </div>\n\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputField\n          className=\"pb-0 mb-0\"\n          type=\"email\"\n          title=\"Email\"\n          onChange={setEmail}\n        />\n        {email && validateEmail(email) ?\n        null : <p className={errClasses}>Please enter a valid email.</p>}\n        {email.length>50 ? <p className={errClasses}>Your email is too long</p> : null}\n      </div>\n\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputField\n          className=\"pb-0 mb-0\"\n          type=\"password\"\n          title=\"Password\"\n          onChange={setPassword}\n        />\n        {password.length >= 6 && password.length <= 120?\n        null : <p className={errClasses}>Password must be 6 to 120 characters.</p>}\n        {/\\d/.test(password) ? null : <p className={errClasses}>Password must contain a number.</p>}\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst ClubFields = ({ username, email, password, description, setUsername, setEmail, setPassword, setDescription }) => {\n  const errClasses = \"text-danger my-0 py-0\"\n\n  return (\n    <React.Fragment>\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputField\n          className=\"pb-0 mb-0\"\n          type=\"text\"\n          title=\"Club Name\"\n          onChange={setUsername}\n        />\n        {username ? null : <p className={errClasses}>Please enter a club name.</p>}\n        {username.length>20 ? <p className={errClasses}>Your club name is too long</p> : null}\n      </div>\n\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputField\n          className=\"pb-0 mb-0\"\n          type=\"email\"\n          title=\"Email\"\n          onChange={setEmail}\n        />\n        {email && validateEmail(email) ?\n        null : <p className={errClasses}>Please enter a valid email.</p>}\n        {email.length>50 ? <p className={errClasses}>Your email is too long</p> : null}\n      </div>\n\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputField\n          className=\"pb-0 mb-0\"\n          type=\"password\"\n          title=\"Password\"\n          onChange={setPassword}\n        />\n        {password.length >= 6 && password.length <= 120?\n        null : <p className={errClasses}>Password must be 6 to 120 characters.</p>}\n        {/\\d/.test(password) ? null : <p className={errClasses}>Password must contain a number.</p>}\n      </div>\n\n      <div className=\"my-4\" style={{ textAlign:'center'}}>\n        <InputArea\n          className=\"pb-0 mb-0\"\n          placeholder=\"Club Description\"\n          onChange={setDescription}\n        />\n        {description ? null : <p className={errClasses}>Please enter a description.</p>}\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst SignupPage = ({ setUser, user }) => {\n  const [ role, setRole ] = useState(\"student\");\n  const [ username, setUsername ] = useState('');\n  const [ email, setEmail ] = useState('');\n  const [ password, setPassword ] = useState('');\n  const [ description, setDescription ] = useState('');\n  const [ errmsg, setErrMsg ] = useState('');\n\n  useEffect(() => {\n    if(user){\n      window.history.pushState({}, '', '/');\n      const navEvent = new PopStateEvent('popstate');\n      window.dispatchEvent(navEvent);\n    }\n  });\n\n  const handleSignup = (e) => {\n    const signup = async (user, email, pw, desc, r) => {\n      try {\n        const { message } = await axios.post('http://localhost:8080/api/auth/signup',\n          {\n            username: user,\n            email: email,\n            password: pw,\n            description: desc,\n            role: [r]\n          }\n        )\n\n        const { data } = await axios.post('http://localhost:8080/api/auth/signin',\n          {\n            username: user,\n            password: pw\n          }\n        )\n\n        localStorage.setItem(\"user\", JSON.stringify(data));\n        setUser(JSON.parse(localStorage.getItem('user')));\n\n        return true;\n      } catch (error) {\n        setErrMsg(error.message);\n        return false;\n      }\n    }\n\n    e.preventDefault();\n\n    if(!username || username.length > 20){\n      setErrMsg(\"Please check your username\");\n    }\n    else if(!email || !validateEmail(email) || email.length > 50){\n      setErrMsg(\"Please check your email\");\n    }\n    else if(password.length < 6 || password.length > 120 || !(/\\d/.test(password))){\n      setErrMsg(\"Please check your password\");\n    }\n    else if(role === \"club\" && !description){\n      setErrMsg(\"Please check your description\");\n    }\n    else{\n      if(signup(username, email, password, description, role)){\n        if(role === \"student\"){\n          window.history.pushState({}, '', `/userdash`);\n        } else{\n          window.history.pushState({}, '', `/clubdash`);\n        }\n\n        const navEvent = new PopStateEvent('popstate');\n        window.dispatchEvent(navEvent);\n      }\n    }\n  };\n\n  return (\n    <ContainerView logoOnly={true} user={undefined}>\n    <div className=\"container\">\n    <div className=\"row d-flex flex-row justify-content-center align-items-center\" style={{height:'60vh'}}>\n        <div className=\"col-10 col-md-8 col-lg-5\">\n          <h1 className=\"my-3\" style={{ textAlign:'center' }}>Sign Up</h1>\n          <hr />\n          {errmsg ?\n            <p className=\"text-danger\" style={{ textAlign:'center' }}>{errmsg}</p>\n            : null}\n          <form onSubmit={handleSignup}>\n            <div className=\"d-flex flex-column align-items-center\">\n              <h6>Account Type:</h6>\n              <span>\n                <label className=\"mr-3\">\n                  <input\n                    type=\"radio\"\n                    name=\"user-type\"\n                    value=\"student\"\n                    className=\"mr-1\"\n                    checked={role===\"student\"}\n                    onChange={e => setRole(e.target.value)}\n                  />\n                  Student\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"user-type\"\n                    value=\"club\"\n                    className=\"mr-1\"\n                    checked={role===\"club\"}\n                    onChange={e => setRole(e.target.value)}\n                  />\n                  Club\n                </label>\n              </span>\n            </div>\n            {role === \"student\" ?\n            <UserFields\n              username={username}\n              email={email}\n              password={password}\n              setUsername={setUsername}\n              setEmail={setEmail}\n              setPassword={setPassword}\n            /> :\n            <ClubFields\n              username={username}\n              email={email}\n              password={password}\n              description={description}\n              setUsername={setUsername}\n              setPassword={setPassword}\n              setEmail={setEmail}\n              setDescription={setDescription}\n            />}\n            <div className=\"d-flex flex-row justify-content-between align-items-center mb-3\">\n              <Link className=\"mr-auto ml-1\" href=\"/login\">\n                <span className=\"hide-mobile\">Already have an account?</span>\n                <span className=\"show-mobile\">Sign In</span>\n              </Link>\n              <button className=\"btn btn-primary ml-auto mr-1\" type=\"Submit\">Submit</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    </ContainerView>\n  );\n};\n\nexport default SignupPage;\n"]},"metadata":{},"sourceType":"module"}